<!DOCTYPE html>
<html>
<head>
    <title>Razorpay Checkout</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body onload="startRazorpayPayment()">

<script>
    function startRazorpayPayment() {
        var options = {
            "key": "{{ key_id }}",
            "amount": "{{ amount }}",
            "currency": "INR",
            "name": "My Store",
            "description": "Test Transaction",
            "order_id": "{{ order_id }}",
            "handler": function (response){
                // Send to backend
                var form = document.createElement('form');
                form.method = 'POST';
                form.action = '/payment_status';

                var fields = {
                    'razorpay_payment_id': response.razorpay_payment_id,
                    'razorpay_order_id': response.razorpay_order_id,
                    'razorpay_signature': response.razorpay_signature
                };

                for (var key in fields) {
                    if (fields.hasOwnProperty(key)) {
                        var hiddenField = document.createElement('input');
                        hiddenField.type = 'hidden';
                        hiddenField.name = key;
                        hiddenField.value = fields[key];

                        form.appendChild(hiddenField);
                    }
                }

                document.body.appendChild(form);
                form.submit();
            },
            "theme": {
                "color": "#3399cc"
            }
        };
        var rzp = new Razorpay(options);
        rzp.open();
    }
</script>

</body>
</html>
